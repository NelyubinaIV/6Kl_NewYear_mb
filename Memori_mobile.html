<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animal Memory ‚Äî 2 Players</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      -webkit-tap-highlight-color: transparent;
      font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 2.5em;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.2em;
      opacity: 0.9;
    }

    .scoreboard {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .player {
      background: white;
      padding: 15px 30px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }

    .player.active {
      transform: scale(1.1);
      background: #ffd700;
      box-shadow: 0 6px 20px rgba(255,215,0,0.5);
    }

    .player h3 {
      font-size: 1.2em;
      color: #764ba2;
      margin-bottom: 5px;
    }

    .player .score {
      font-size: 2em;
      color: #667eea;
      font-weight: bold;
    }

    .game-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      max-width: 800px;
      width: 100%;
      margin: 0 auto 30px;
      padding: 0 20px;
    }

    .card {
      touch-action: manipulation;
      aspect-ratio: 1;
      position: relative;
      cursor: pointer;
      perspective: 1000px;
      min-height: 120px;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .card-front {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      font-size: 3em;
    }

    .card-back {
      background: white;
      transform: rotateY(180deg);
      padding: 10px;
    }

    .card-back img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 10px;
    }

    .card.matched {
      opacity: 0.6;
      pointer-events: none;
    }

    .controls {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }

    button {
      touch-action: manipulation;
      padding: 12px 30px;
      font-size: 1.1em;
      font-family: inherit;
      background: white;
      color: #764ba2;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: all 0.3s;
      font-weight: bold;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    }

    button:active {
      transform: translateY(0);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 40px;
      border-radius: 20px;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      animation: modalPop 0.3s ease;
    }
	/* –ö—Ä—É–ø–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ (–¥–ª—è –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤) */
	#quizQuestion {
	  font-size: 1.9em;   /* —Å–¥–µ–ª–∞–π 2em, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —Ä–æ–≤–Ω–æ –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
	  font-weight: 800;
	  line-height: 1.2;
	  margin-bottom: 10px;
	}


    @keyframes modalPop {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .modal-content h2 {
      color: #764ba2;
      margin-bottom: 20px;
      font-size: 2em;
    }

    .modal-content p {
      font-size: 1.2em;
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .quiz-options {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .quiz-btn {
      padding: 15px 30px;
      font-size: 1.3em;
      background: #667eea;
      color: white;
    }

    .quiz-btn:hover {
      background: #764ba2;
    }

    .close-btn {
      margin-top: 20px;
      background: #f5576c;
      color: white;
    }

    .help-text {
      text-align: left;
      margin-top: 20px;
    }

    .help-text li {
      margin-bottom: 10px;
    }

    @media (max-width: 600px) {
      body {
      -webkit-tap-highlight-color: transparent; padding: 12px; }
      .header h1 { font-size: 1.7em; }
      .header p { font-size: 1em; }

      .game-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        padding: 0 6px;
      }

      .card {
      touch-action: manipulation; min-height: 70px; }
      .card-front { font-size: 2.1em; }

      .modal-content {
        width: min(92vw, 520px);
        padding: 18px;
        max-height: 92dvh;
        overflow: auto;
      }

      #quizQuestion { font-size: 1.35em; }
      .quiz-btn { padding: 14px 18px; font-size: 1.1em; }
      #restartBtn { width: 100%; }
    }

      .header h1 {
        font-size: 1.8em;
      }

      .card-front {
        font-size: 2em;
      }
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      border: 0;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üêæ –ö–æ—Ä–µ–Ω—å —Å —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ–º –∫–∞—Å-/–∫–æ—Å-üêæ</h1>
    <p>–ù–∞–π–¥–∏ –ø–∞—Ä—ã –∏ –æ—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –æ—á–∫–∏!</p>
  </div>

  <div class="scoreboard">
    <div class="player active" id="player1">
      <h3>–ò–≥—Ä–æ–∫ 1</h3>
      <div class="score">0</div>
    </div>
    <div class="player" id="player2">
      <h3>–ò–≥—Ä–æ–∫ 2</h3>
      <div class="score">0</div>
    </div>
  </div>

  <div aria-live="polite" aria-atomic="true" class="sr-only" id="gameStatus"></div>

  <div class="game-grid" id="gameGrid"></div>

  <div class="controls">
    <button onclick="newGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    <button onclick="passTurn()">‚û°Ô∏è –ü–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥</button>
    <button onclick="showHelp()">‚ùì –ü–æ–º–æ—â—å</button>
  </div>

  <!-- Quiz Modal -->
  <div class="modal" id="quizModal" role="dialog" aria-labelledby="quizTitle">
    <div class="modal-content">
      <h2 id="quizTitle">–í–Ω–∏–º–∞–Ω–∏–µ, –≤–æ–ø—Ä–æ—Å!</h2>
      <p id="quizQuestion"></p>
      <div class="quiz-options" id="quizOptions"></div>
    </div>
  </div>

  <!-- Winner Modal -->
  <div class="modal" id="winnerModal" role="dialog" aria-labelledby="winnerTitle">
    <div class="modal-content">
      <h2 id="winnerTitle">üéâ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! üéâ</h2>
      <p id="winnerText"></p>
      <button class="close-btn" onclick="closeWinnerModal()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="modal" id="helpModal" role="dialog" aria-labelledby="helpTitle">
    <div class="modal-content">
      <h2 id="helpTitle">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h2>
      <div class="help-text">
        <ol>
          <li>–ò–≥—Ä–æ–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç –¥–≤–µ –∫–∞—Ä—Ç–æ—á–∫–∏, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ –ø–∞—Ä—ã.</li>
          <li>–ö–æ–≥–¥–∞ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –ø–∞—Ä—É, –æ—Ç–≤–µ—Ç—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–∏ –∫–∞—Å-/–∫–æ—Å-.</li>
          <li>–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—á–∫–æ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç–µ –∏–≥—Ä–∞—Ç—å!</li>
          <li>–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ —Å–æ–≤–ø–∞–ª–∏ ‚Äî —Ö–æ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É.</li>
          <li>–ò–≥—Ä–æ–∫ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—á–∫–æ–≤ –≤ –∫–æ–Ω—Ü–µ –ø–æ–±–µ–∂–¥–∞–µ—Ç!</li>
        </ol>
      </div>
      <button class="close-btn" onclick="closeHelp()">–ü–æ–Ω—è—Ç–Ω–æ!</button>
    </div>
  </div>

  <script>
    const animals = [
  { name: 'cat',       img: './1.png' },
  { name: 'dog',       img: './2.png' },
  { name: 'elephant',  img: './3.png' },
  { name: 'lion',      img: './4.png' },
  { name: 'butterfly', img: './5.png' },
  { name: 'penguin',   img: './6.png' },
  { name: 'turtle',    img: './7.png' },
  { name: 'rabbit',    img: './8.png' }
];

    const quizQuestions = [
 { q: "–ù–µ –∫_—Å–∞–π—Ç–µ—Å—å –∏—Å—Ç–æ—Ä–∏–∏", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ö_—Å–Ω—É—Å—å –ø–ª–∏—Ç—ã", options: ["–ê", "–û"], a: "–û" },
  { q: "–ö_—Å–∞—Ç–µ–ª—å–Ω–∞—è –ª–∏–Ω–∏—è", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ö_—Å–∞–Ω–∏–µ –º—è—á–∞", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ù–µ–ø—Ä–∏–∫_—Å–Ω–æ–≤–µ–Ω–Ω—ã–π –∑–∞–ø–∞—Å", options: ["–ê", "–û"], a: "–û" },
  { q: "–ö_—Å–Ω—É–ª—Å—è –≤–µ—Ç–≤—è–º–∏ –≤–æ–¥—ã", options: ["–ê", "–û"], a: "–û" },
  { q: "–ö_—Å–∞—Ç—å—Å—è –¥–Ω–∞", options: ["–ê", "–û"], a: "–ê" },
  { q: "–°–æ–ø—Ä–∏–∫_—Å–Ω—ë—à—å—Å—è —Å –∏—Å–∫—É—Å—Å—Ç–≤–æ–º", options: ["–ê", "–û"], a: "–û" },
  { q: "–ö_—Å–∞—é—Å—å —Ç–µ–º—ã —Ä–∞–∑–≥–æ–≤–æ—Ä–∞", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ö_—Å–∞–ª–∏—Å—å —Ä—É–∫–∞–º–∏ –≤–æ–¥—ã", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ö_—Å–∞–µ—à—å—Å—è –≤–æ–ø—Ä–æ—Å–∞ –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ö_—Å–∞—è—Å—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π", options: ["–ê", "–û"], a: "–ê" },
  { q: "–ö_—Å–Ω—ë—Ç—Å—è —Ä—É–∫–æ–π", options: ["–ê", "–û"], a: "–û" },
  { q: "–ü—Ä–∏–∫_—Å–Ω—ë–º—Å—è –ø–∞–ª—å—Ü–∞–º–∏", options: ["–ê", "–û"], a: "–û" },
    ];

    let gameState = {
      cards: [],
      flipped: [],
      matched: [],
      currentPlayer: 1,
      scores: [0, 0],
      canFlip: true,
      matchedPair: null
    };

    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function createCards() {
      const pairs = [...animals, ...animals];
      return shuffle(pairs).map((animal, idx) => ({
        id: idx,
        animal: animal,
        flipped: false,
        matched: false
      }));
    }

    function renderGrid() {
      const grid = document.getElementById('gameGrid');
      grid.innerHTML = '';
      
      gameState.cards.forEach((card, idx) => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card';
        if (card.flipped) cardEl.classList.add('flipped');
        if (card.matched) cardEl.classList.add('matched');
        
        cardEl.innerHTML = `
          <div class="card-inner">
            <div class="card-face card-front">üé¥</div>
            <div class="card-face card-back">
              <img src="${card.animal.img}" alt="${card.animal.name}">
            </div>
          </div>
        `;
        
        cardEl.onclick = () => flipCard(idx);
        grid.appendChild(cardEl);
      });
    }

    function flipCard(idx) {
      if (!gameState.canFlip) return;
      if (gameState.cards[idx].flipped) return;
      if (gameState.cards[idx].matched) return;
      if (gameState.flipped.length >= 2) return;

      gameState.cards[idx].flipped = true;
      gameState.flipped.push(idx);
      renderGrid();

      if (gameState.flipped.length === 2) {
        gameState.canFlip = false;
        setTimeout(checkMatch, 800);
      }
    }

    function checkMatch() {
      const [idx1, idx2] = gameState.flipped;
      const card1 = gameState.cards[idx1];
      const card2 = gameState.cards[idx2];

      if (card1.animal.name === card2.animal.name) {
        gameState.matchedPair = card1.animal.name;
        showQuiz();
      } else {
        gameState.cards[idx1].flipped = false;
        gameState.cards[idx2].flipped = false;
        gameState.flipped = [];
        gameState.canFlip = true;
        switchPlayer();
        renderGrid();
      }
    }

    function showQuiz() {
      const quiz = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
      const modal = document.getElementById('quizModal');
      const question = document.getElementById('quizQuestion');
      const options = document.getElementById('quizOptions');

      question.textContent = quiz.q;
      options.innerHTML = '';

      quiz.options.forEach(option => {
        const btn = document.createElement('button');
        btn.className = 'quiz-btn';
        btn.textContent = option;
        btn.onclick = () => checkQuizAnswer(option, quiz.a);
        options.appendChild(btn);
      });

      modal.classList.add('show');
    }

    function checkQuizAnswer(selected, correct) {
      const modal = document.getElementById('quizModal');
      modal.classList.remove('show');

      if (selected === correct) {
        const [idx1, idx2] = gameState.flipped;
        gameState.cards[idx1].matched = true;
        gameState.cards[idx2].matched = true;
        gameState.matched.push(idx1, idx2);
        gameState.scores[gameState.currentPlayer - 1]++;
        updateScores();
        announceStatus(`–ò–≥—Ä–æ–∫ ${gameState.currentPlayer} –∑–∞—Ä–∞–±–æ—Ç–∞–ª –æ—á–∫–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç!`);
      } else {
        const [idx1, idx2] = gameState.flipped;
        gameState.cards[idx1].flipped = false;
        gameState.cards[idx2].flipped = false;
        announceStatus(`–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç. –•–æ–¥ –∏–≥—Ä–æ–∫–∞ ${gameState.currentPlayer === 1 ? 2 : 1}.`);
        switchPlayer();
      }

      gameState.flipped = [];
      gameState.canFlip = true;
      renderGrid();

      if (gameState.matched.length === gameState.cards.length) {
        setTimeout(showWinner, 500);
      }
    }

    function switchPlayer() {
      gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
      document.getElementById('player1').classList.toggle('active');
      document.getElementById('player2').classList.toggle('active');
      announceStatus(`–•–æ–¥ –∏–≥—Ä–æ–∫–∞ ${gameState.currentPlayer}`);
    }

    function passTurn() {
      if (gameState.flipped.length > 0) {
        gameState.flipped.forEach(idx => {
          gameState.cards[idx].flipped = false;
        });
        gameState.flipped = [];
        renderGrid();
      }
      switchPlayer();
    }

    function updateScores() {
      document.querySelector('#player1 .score').textContent = gameState.scores[0];
      document.querySelector('#player2 .score').textContent = gameState.scores[1];
    }

    function showWinner() {
      const modal = document.getElementById('winnerModal');
      const text = document.getElementById('winnerText');
      
      if (gameState.scores[0] > gameState.scores[1]) {
        text.textContent = `–ò–≥—Ä–æ–∫ 1 –ø–æ–±–µ–∂–¥–∞–µ—Ç —Å ${gameState.scores[0]} –æ—á–∫–∞–º–∏! üèÜ`;
      } else if (gameState.scores[1] > gameState.scores[0]) {
        text.textContent = `–ò–≥—Ä–æ–∫ 2 –ø–æ–±–µ–∂–¥–∞–µ—Ç —Å ${gameState.scores[1]} –æ—á–∫–∞–º–∏! üèÜ`;
      } else {
        text.textContent = `–ù–∏—á—å—è! –û–±–∞ –∏–≥—Ä–æ–∫–∞ –Ω–∞–±—Ä–∞–ª–∏ –ø–æ ${gameState.scores[0]} –æ—á–∫–æ–≤! ü§ù`;
      }
      
      modal.classList.add('show');
      announceStatus(text.textContent);
	 // üëâ —Å–æ–æ–±—â–∞–µ–º "–≥–ª–∞–≤–Ω–æ–π" —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —á—Ç–æ –∏–≥—Ä–∞ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
  if (window.parent && window.parent !== window) {
    window.parent.postMessage({ type: 'played' }, '*');
  }
}

    function closeWinnerModal() {
      document.getElementById('winnerModal').classList.remove('show');
      newGame();
    }

    function showHelp() {
      document.getElementById('helpModal').classList.add('show');
    }

    function closeHelp() {
      document.getElementById('helpModal').classList.remove('show');
    }

    function announceStatus(message) {
      const status = document.getElementById('gameStatus');
      status.textContent = message;
    }

    function newGame() {
      gameState = {
        cards: createCards(),
        flipped: [],
        matched: [],
        currentPlayer: 1,
        scores: [0, 0],
        canFlip: true,
        matchedPair: null
      };
      
      document.getElementById('player1').classList.add('active');
      document.getElementById('player2').classList.remove('active');
      updateScores();
      renderGrid();
      announceStatus("–ù–æ–≤–∞—è –∏–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞. –•–æ–¥ –∏–≥—Ä–æ–∫–∞ 1.");
    }

    // Escape key closes modals
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('show'));
      }
    });

    // Initialize game
    newGame();
  </script>
</body>
</html>