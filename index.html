<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ü–æ–º–æ–≥–∏ –º–æ–µ–º—É –∫–æ—Ç–∏–∫—É –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(circle at top, #4f77ff 0%, #262655 55%, #181535 100%);
            min-height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: stretch;
            justify-content: center;
        }

        .game-container {
            display: flex;
            height: 100vh;
            max-width: 1400px;
            width: 100%;
            padding: 20px;
            gap: 20px;
        }

        /* ----------------- –õ–ï–í–ê–Ø –§–ò–û–õ–ï–¢–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ ----------------- */

        .left-menu {
            width: 320px;
            background: linear-gradient(180deg, #333b92 0%, #242768 100%);
            border-radius: 26px;
            padding: 24px 18px;
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            gap: 18px;
            color: #fff;
        }

        .menu-title {
            font-size: 22px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 6px;
        }

        .menu-subtitle {
            font-size: 13px;
            opacity: 0.8;
            text-align: center;
            margin-bottom: 8px;
        }

        .menu-button {
            border: none;
            background: linear-gradient(145deg, #4350bf 0%, #3240a7 100%);
            border-radius: 24px;
            padding: 14px 14px 16px;
            box-shadow: 0 10px 22px rgba(5, 6, 38, 0.6);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 10px;
            color: #fff;
            text-align: left;
            transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
        }

        .menu-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.55);
            background: linear-gradient(145deg, #4e5de4 0%, #3a48ba 100%);
        }

        .menu-button:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .menu-button:disabled {
            cursor: default;
            opacity: 0.85;
        }

        .menu-button.completed {
            background: linear-gradient(145deg, #35b86d 0%, #1f8f4d 100%);
            box-shadow: 0 14px 30px rgba(10, 96, 53, 0.65);
        }
        .santa-panel {
            margin-top: 4px;
            padding: 12px 12px 14px;
            border-radius: 22px;
            background: radial-gradient(circle at top, #ffe9c9 0%, #f8b673 45%, #f48b5a 100%);
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.45);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .santa-image {
            width: 100%;
            border-radius: 18px;
            overflow: hidden;
            aspect-ratio: 4 / 3;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #1f2355; /* —Ñ–æ–Ω, –ø–æ–∫–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –ø–æ–¥–≥—Ä—É–∑–∏–ª–∞—Å—å */
        }

        .santa-caption {
            font-size: 13px;
            line-height: 1.4;
            opacity: 0.9;
			text-align: center;
        }

        .menu-inner {
            display: grid;
            grid-template-columns: auto 1fr;
            column-gap: 12px;
            row-gap: 8px;
            align-items: center;
        }

        .menu-icon {
            width: 72px;
            height: 60px;
            border-radius: 18px;
            background: radial-gradient(circle at 20% 0%, #fefefe 0%, #f2f0ff 40%, #d4dafb 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.9);
        }

        .menu-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .menu-main-text {
            font-size: 18px;
            font-weight: 700;
            line-height: 1.2;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 5px 14px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 700;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.35);
        }

        .status-not-started {
            background: #edf0ff;
            color: #273383;
        }

        .status-in-progress {
            background: #ffb855;
            color: #542d00;
        }

        .status-done {
            background: #41c26c;
            color: #ffffff;
        }
/* –∫–Ω–æ–ø–∫–∏-—Å—Ç–∞—Ç—É—Å—ã –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏: —Ç–æ–ª—å–∫–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã */
.status-btn {
    opacity: 0.5;
    pointer-events: none;  /* –∫–ª–∏–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã */
    cursor: default;
}

.status-btn.active {
    opacity: 1;
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
}


        /* ----------------- –¶–ï–ù–¢–†. –û–ë–õ–ê–°–¢–¨: –ü–†–û–ì–†–ï–°–° + –ö–õ–ê–°–° ----------------- */

        .center-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* —à–∫–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–≤–µ—Ä—Ö—É */

        .progress-wrapper {
            padding: 2px 40px 0 40px;
        }

        .progress-bar {
            width: 100%;
            height: 28px;
            background: linear-gradient(145deg, #2b307d 0%, #232458 100%);
            border-radius: 999px;
            padding: 4px;
            box-shadow: 0 12px 26px rgba(0, 0, 0, 0.55);
        }

        .progress-inner {
            height: 100%;
            width: 0%;
            border-radius: 999px;
            background: linear-gradient(145deg, #ffcf6a 0%, #ff8b3d 50%, #ff6b36 100%);
            box-shadow: 0 4px 12px rgba(255, 149, 44, 0.9);
            transition: width 0.35s ease;
        }

        /* "–æ–∫–Ω–æ –∫–ª–∞—Å—Å–∞" */

        .classroom-card {
            flex: 1;
            background: radial-gradient(circle at top, #ffd78c 0%, #f9b45e 45%, #f29b55 100%);
            border-radius: 30px;
            padding: 26px 30px 30px;
            box-shadow: 0 22px 50px rgba(0, 0, 0, 0.55);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

                .classroom-window {
            position: relative;
            flex: 1;
            border-radius: 24px;
            overflow: hidden;
            background-color: #000;
            background-image: url("./classroom-bg.png"); /* —Ç–≤–æ–π —Ñ–æ–Ω –∫–ª–∞—Å—Å–∞ */
            background-size: cover;
            background-position: center;
            box-shadow: inset 0 6px 10px rgba(255, 255, 255, 0.65),
                        inset 0 -10px 18px rgba(195, 120, 50, 0.45);
        }


        .scene {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 14px;
            font-size: 26px;
            color: #5e3a12;
        }
		/* –ü–ª–∞—à–∫–∞ —Ç–µ–∫—Å—Ç–∞ –≤–Ω–∏–∑—É –±–æ–ª—å—à–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ */
		.scene-text-panel {
			position: absolute;
			left: 24px;
			right: 24px;
			bottom: 24px;
			border-radius: 18px;
			padding: 14px 20px 16px;
			background: linear-gradient(135deg,
				rgba(255, 255, 255, 0.96),
				rgba(249, 228, 204, 0.96)
			);
			box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
			display: flex;
			flex-direction: column;
			gap: 6px;
			z-index: 1;
		}
		.scene-title,
		.classroom-caption {
			text-align: center;
		}
		/* –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–∏—Ö —Å—Ü–µ–Ω, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –≤–∏—Å–µ–ª –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ */
		.scene > .scene-title,
		.scene > .classroom-caption {
			display: none;
		}

        .scene.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .scene-title {
            font-size: 22px;
            font-weight: 700;
        }

        /* –∏–º–∏—Ç–∞—Ü–∏—è –∫–æ—Ç–∏–∫–∞ + –∫–ª–∞—Å—Å (–∑–∞–≥–ª—É—à–∫–∞) */

        .classroom-main {
            font-size: 60px;
        }

        .classroom-caption {
            font-size: 20px;
            opacity: 0.9;
        }

        /* –±–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏ –∏–∑ –∫–ª–∞—Å—Å–∞" */

        .exit-big-wrapper {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .exit-big-btn {
            border: none;
            padding: 16px 80px;
            border-radius: 999px;
            background: linear-gradient(145deg, #ff9b62 0%, #ff6a49 40%, #ff5040 100%);
            color: #ffffff;
            font-size: 24px;
            font-weight: 800;
            letter-spacing: 0.03em;
            box-shadow: 0 14px 30px rgba(170, 52, 31, 0.7);
            cursor: pointer;
            transition: transform 0.18s ease, box-shadow 0.18s ease;
        }

        .exit-big-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 40px rgba(170, 52, 31, 0.85);
        }

        .exit-big-btn:active {
            transform: translateY(-1px);
        }

        /* ----------------- –ú–û–î–ê–õ–ö–ò ----------------- */

        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
		background: #ffffff;
		border-radius: 24px;

		/* –±—ã–ª–æ: max-width: 900px; width: 90%; */
		width: min(96vw, 1400px);     /* —à–∏—Ä–µ */
		height: min(92vh, 950px);     /* –≤—ã—à–µ (–Ω–æ –Ω–µ –±–æ–ª—å—à–µ —ç–∫—Ä–∞–Ω–∞) */

		padding: 18px 18px 16px;      /* –º–µ–Ω—å—à–µ ‚Äú—Å—ä–µ–¥–∞–µ–º‚Äù –º–µ—Å—Ç–∞ */
		box-shadow: 0 22px 60px rgba(0, 0, 0, 0.7);

		display: flex;                /* –≤–∞–∂–Ω–æ: —á—Ç–æ–±—ã iframe –º–æ–≥ —Ä–∞—Å—Ç—è–Ω—É—Ç—å—Å—è */
		flex-direction: column;
		gap: 12px;

		overflow: hidden;             /* –≤–º–µ—Å—Ç–æ overflow-y:auto ‚Äî —á—Ç–æ–±—ã –∏–≥—Ä–∞ –±—ã–ª–∞ –≤–∏–¥–Ω–∞ */
		animation: slideIn 0.3s ease;
	}


        .modal-header {
            font-size: 26px;
            font-weight: 800;
            color: #3942a9;
            margin-bottom: 18px;
            text-align: center;
        }

        .modal-iframe {
		width: 100%;
		flex: 1;                      /* –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é –æ—Å—Ç–∞–≤—à—É—é—Å—è –≤—ã—Å–æ—Ç—É */
		height: auto;                 /* –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç flex */
		border-radius: 18px;
		border: 3px solid #eef0ff;
		margin-bottom: 0;             /* –±—ã–ª–æ 18px ‚Äî –ª–∏—à–Ω–µ–µ –º–µ—Å—Ç–æ */
	}

        .modal-hint {
            background: #f6f7ff;
            border-radius: 14px;
            padding: 12px 16px;
            font-size: 15px;
            color: #444b7a;
            margin-bottom: 18px;
        }

        .modal-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .modal-btn {
            flex: 1;
            min-width: 180px;
            padding: 13px 18px;
            border-radius: 14px;
            border: none;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.18s ease, box-shadow 0.18s ease, opacity 0.18s ease;
        }

        .modal-btn.primary {
            background: linear-gradient(145deg, #4c5af0 0%, #3841c7 100%);
            color: #fff;
            box-shadow: 0 8px 18px rgba(55, 69, 201, 0.55);
        }

        .modal-btn.success {
            background: linear-gradient(145deg, #28b66a 0%, #1f8b4c 100%);
            color: #fff;
            box-shadow: 0 8px 18px rgba(18, 110, 63, 0.65);
        }

        .modal-btn.close {
            background: #e2e2e7;
            color: #44475b;
        }

        .modal-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .modal-btn:disabled {
            opacity: 0.6;
            cursor: default;
            transform: none;
            box-shadow: none;
        }

        /* ----------------- –≠–ö–†–ê–ù –ö–û–ù–¶–û–í–ö–ò ----------------- */

        .ending-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.86);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .ending-overlay.active {
            display: flex;
        }

        .ending-content {
            background: #ffffff;
            border-radius: 26px;
            padding: 34px 32px 32px;
            max-width: 720px;
            width: 90%;
            text-align: center;
            box-shadow: 0 26px 70px rgba(0, 0, 0, 0.7);
            animation: slideIn 0.3s ease;
        }

        .ending-title {
            font-size: 30px;
            font-weight: 800;
            color: #3a43b2;
            margin-bottom: 20px;
        }

        .ending-image-placeholder{
	  width: 100%;
	  max-width: 380px;
	  aspect-ratio: 4 / 3;     /* –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã ‚Äî –±—É–¥–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è */
	  height: auto;
	  margin: 0 auto 22px;
	  border-radius: 18px;
	  overflow: hidden;

	  background-size: contain;   /* –í–ê–ñ–ù–û: –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Ü–µ–ª–∏–∫–æ–º, –±–µ–∑ –æ–±—Ä–µ–∑–∫–∏ */
	  background-position: center;
	  background-repeat: no-repeat;
	  background-color: #ffffff;  /* —á—Ç–æ–±—ã –ø—É—Å—Ç—ã–µ –ø–æ–ª—è –≤—ã–≥–ª—è–¥–µ–ª–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ */

	  box-shadow: none;
	  display: block;
	}



        .ending-text {
            font-size: 17px;
            line-height: 1.7;
            color: #333348;
            margin-bottom: 26px;
        }

        .ending-btn {
            padding: 15px 40px;
            border-radius: 999px;
            border: none;
            background: linear-gradient(145deg, #ff9d70 0%, #ff5c63 45%, #ff3e4d 100%);
            color: #ffffff;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 16px 36px rgba(143, 45, 52, 0.8);
            transition: transform 0.18s ease, box-shadow 0.18s ease;
        }

        .ending-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 42px rgba(143, 45, 52, 0.9);
        }

        .ending-btn:active {
            transform: translateY(-1px);
        }

        /* ----------------- –ê–ù–ò–ú–ê–¶–ò–ò ----------------- */

        @keyframes fadeIn {
            from { opacity: 0; }
            to   { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                transform: translateY(-40px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        

        /* ----------------- MOBILE HELPERS ----------------- */
        body.no-scroll {
            overflow: hidden;
        }
        .modal-overlay {
            overscroll-behavior: contain;
        }

        /* –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –¥–µ–ª–∞–µ–º –º–æ–¥–∞–ª–∫–∏ –ø–æ—á—Ç–∏ —Ñ—É–ª–ª—Å–∫—Ä–∏–Ω –∏ –æ—Ç–¥–∞—ë–º –º–∞–∫—Å–∏–º—É–º –º–µ—Å—Ç–∞ –∏–≥—Ä–µ */
        @media (max-width: 640px) {
            .modal-content {
                width: 100vw;
                height: 100dvh;
                border-radius: 0;
                padding: 12px 12px 10px;
                gap: 10px;
            }
            .modal-header {
                font-size: 20px;
                margin-bottom: 6px;
            }
            .modal-hint {
                font-size: 13px;
                margin-bottom: 8px;
                padding: 10px 12px;
                max-height: 92px;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
            .modal-buttons .modal-btn {
                min-width: 0;
                padding: 12px 14px;
            }
            .modal-iframe {
                border-radius: 14px;
            }
        }

        /* ----------------- –ê–î–ê–ü–¢–ò–í ----------------- */

        @media (max-width: 960px) {
            body {
                overflow-y: auto;
            }
            .game-container {
                flex-direction: column;
                height: auto;
            }
            .left-menu {
                width: 100%;
                flex-direction: row;
                align-items: stretch;
                overflow-x: auto;
            }
            .menu-title,
            .menu-subtitle {
                display: none;
            }
            .menu-button {
                min-width: 220px;
            }
        }

        @media (max-width: 640px) {
            .progress-wrapper {
                padding: 4px 16px 0;
            }
            .classroom-card {
                padding: 18px 16px 20px;
            }
            .exit-big-btn {
                width: 100%;
                padding-inline: 24px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
<div class="game-container">
    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <aside class="left-menu">
                <div class="santa-panel">
            <div class="santa-image" id="santaImage"></div>
            <div class="santa-caption" id="santaCaption">
                –î–µ–¥ –ú–æ—Ä–æ–∑ –∂–¥—ë—Ç, –∫–æ–≥–¥–∞ –∫–æ—Ç–∏–∫ –Ω–∞—á–Ω—ë—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.
            </div>
        </div>
		<div class="menu-title">üê± –ü–æ–º–æ–≥–∏ –º–æ–µ–º—É –∫–æ—Ç–∏–∫—É –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</div>
        <div class="menu-subtitle">–í—ã–±–∏—Ä–∞–π –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π –ø–æ–¥–∞—Ä–æ–∫</div>

        <button class="menu-button" id="boardBtn" data-preview="board">
            <div class="menu-inner">
                <div class="menu-icon">üßÆ</div>
                <div class="menu-text">
                    <div class="menu-main-text">–†–∞–±–æ—Ç–∞—Ç—å —É –¥–æ—Å–∫–∏</div>
                    <div class="status-badge status-not-started" id="boardStatus">–ù–µ –Ω–∞—á–∞—Ç–æ</div>
                </div>
            </div>
        </button>

        <button class="menu-button" id="tabletBtn" data-preview="tablet">
            <div class="menu-inner">
                <div class="menu-icon">üíª</div>
                <div class="menu-text">
                    <div class="menu-main-text">–†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ</div>
                    <div class="status-badge status-not-started" id="tabletStatus">–ù–µ –Ω–∞—á–∞—Ç–æ</div>
                </div>
            </div>
        </button>

        <button class="menu-button" id="playBtn" data-preview="phone">
            <div class="menu-inner">
                <div class="menu-icon">üì±</div>
                <div class="menu-text">
                    <div class="menu-main-text">–ü–æ–∏–≥—Ä–∞—Ç—å</div>
                    <div class="status-badge status-not-started" id="playStatus">–ù–µ –Ω–∞—á–∞—Ç–æ</div>
                </div>
            </div>
        </button>
    </aside>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å -->
    <main class="center-area">
        <!-- –®–∫–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
        <div class="progress-wrapper">
            <div class="progress-bar">
                <div class="progress-inner" id="progressFill"></div>
            </div>
        </div>

        <!-- "–û–∫–Ω–æ" —Å –∫–ª–∞—Å—Å–æ–º –∏ –∫–æ—Ç–∏–∫–æ–º -->
        <div class="classroom-card">
            <div class="classroom-window">
	  <!-- –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ü–µ–Ω–∞ (—Ç–µ–∫—Å—Ç –±–µ—Ä—ë–º –æ—Ç—Å—é–¥–∞, –Ω–æ –æ–Ω —Å–∫—Ä—ã—Ç CSS-–æ–º) -->
	  <div class="scene" id="classroomImg">
		<div class="scene-title">–ö–æ—Ç–∏–∫ –æ—á–µ–Ω—å —Ö–æ—Ç–µ–ª –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫ –∫ –ù–æ–≤–æ–º—É –≥–æ–¥—É, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–ª—Å—è –≤ –∫–ª–∞—Å—Å–µ –ø–æ—Å–ª–µ —É—Ä–æ–∫–æ–≤</div>
		<div class="classroom-caption">–í—ã–±–µ—Ä–∏, —á–µ–º –æ–Ω –∑–∞–π–º—ë—Ç—Å—è: –¥–æ—Å–∫–∞, –ø–ª–∞–Ω—à–µ—Ç –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω.</div>
	  </div>

	  <!-- –ü—Ä–µ–≤—å—é –¥–ª—è –¥–æ—Å–∫–∏ -->
	  <div class="scene hidden" id="boardPreview">
		<div class="classroom-main"></div>
		<div class="scene-title">–†–∞–±–æ—Ç–∞ —É –¥–æ—Å–∫–∏</div>
		<div class="classroom-caption">–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∏ –ø–æ–¥–∞—Ä–æ–∫.</div>
	  </div>

	  <!-- –ü—Ä–µ–≤—å—é –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–∞ -->
	  <div class="scene hidden" id="tabletPreview">
		<div class="classroom-main"></div>
		<div class="scene-title">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ</div>
		<div class="classroom-caption">–ó–∞–¥–∞–Ω–∏—è –ø–æ–ø—Ä–∞–∫—Ç–∏–∫—É—é—Ç —Ç–æ, —á—Ç–æ –±—ã–ª–æ –Ω–∞ —É—Ä–æ–∫–µ.</div>
	  </div>

	  <!-- –ü—Ä–µ–≤—å—é –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
	  <div class="scene hidden" id="phonePreview">
		<div class="classroom-main"></div>
		<div class="scene-title">–ü–µ—Ä–µ—Ä—ã–≤ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º</div>
		<div class="classroom-caption">–ù–µ–º–Ω–æ–≥–æ –∏–≥—Ä—ã ‚Äî –∏ —Å–Ω–æ–≤–∞ –∫ —É—á—ë–±–µ!</div>
	  </div>

	  <!-- –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –æ–±—â–∞—è –ø–ª–∞—à–∫–∞ (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞, –Ω–µ –ø—Ä—è—á–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ü–µ–Ω–∞–º–∏) -->
	  <div class="scene-text-panel" id="sceneTextPanel">
		<div class="scene-title" id="sceneTitlePanel"></div>
		<div class="classroom-caption" id="sceneCaptionPanel"></div>
	  </div>
</div>



                <!-- –ü—Ä–µ–≤—å—é –¥–ª—è –¥–æ—Å–∫–∏ -->
                <div class="scene hidden" id="boardPreview">
                    <div class="classroom-main">üßÆ</div>
                    <div class="scene-title">–†–∞–±–æ—Ç–∞ —É –¥–æ—Å–∫–∏</div>
                    <div class="classroom-caption">
                        –í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∏ –ø–æ–¥–∞—Ä–æ–∫.
                    </div>
                </div>

                <!-- –ü—Ä–µ–≤—å—é –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–∞ -->
                <div class="scene hidden" id="tabletPreview">
                    <div class="classroom-main">üíª</div>
                    <div class="scene-title">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ</div>
                    <div class="classroom-caption">
                        –ó–∞–¥–∞–Ω–∏—è –ø–æ–ø—Ä–∞–∫—Ç–∏–∫—É—é—Ç —Ç–æ, —á—Ç–æ –±—ã–ª–æ –Ω–∞ —É—Ä–æ–∫–µ.
                    </div>
                </div>

                <!-- –ü—Ä–µ–≤—å—é –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
                <div class="scene hidden" id="phonePreview">
                    <div class="classroom-main">üì±</div>
                    <div class="scene-title">–ü–µ—Ä–µ—Ä—ã–≤ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º</div>
                    <div class="classroom-caption">
                        –ù–µ–º–Ω–æ–≥–æ –∏–≥—Ä—ã ‚Äî –∏ —Å–Ω–æ–≤–∞ –∫ —É—á—ë–±–µ!
                    </div>
                </div>
            </div>

            <!-- –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
            <div class="exit-big-wrapper">
                <button class="exit-big-btn" id="exitBtn">
                    –í—ã–π—Ç–∏ –∏–∑ –∫–ª–∞—Å—Å–∞
                </button>
            </div>
        </div>
    </main>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞: —Ä–∞–±–æ—Ç–∞ —É –¥–æ—Å–∫–∏ -->
<div class="modal-overlay" id="boardModal">
    <div class="modal-content">
        <div class="modal-header">üìù –†–∞–±–æ—Ç–∞ —É –¥–æ—Å–∫–∏</div>
        <!-- –ó–∞–º–µ–Ω–∏—Ç—å about:blank –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –∏–≥—Ä—ã -->
        <iframe class="modal-iframe" src="about:blank" id="boardIframe"></iframe>
        <div class="modal-hint">
    üí° –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
    ¬´–í&nbsp;–ø—Ä–æ—Ü–µ—Å—Å–µ¬ª ‚Äî –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞—á–∞—Ç–æ, ¬´–ì–æ—Ç–æ–≤–æ¬ª ‚Äî –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ —Å–æ–æ–±—â–∏—Ç –æ–± —É—Å–ø–µ—Ö–µ.
</div>
<div class="modal-buttons">
    <button class="modal-btn primary status-btn" id="boardTryBtn">
        –í –ø—Ä–æ—Ü–µ—Å—Å–µ
    </button>
    <button class="modal-btn success status-btn" id="boardCompleteBtn">
        –ì–æ—Ç–æ–≤–æ
    </button>
    <button class="modal-btn close" id="boardCloseBtn">
        –ó–∞–∫—Ä—ã—Ç—å
    </button>
</div>

    </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞: —Ä–∞–±–æ—Ç–∞ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ -->
<div class="modal-overlay" id="tabletModal">
    <div class="modal-content">
        <div class="modal-header">üì± –†–∞–±–æ—Ç–∞ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ</div>
        <!-- –ó–∞–º–µ–Ω–∏—Ç—å about:blank –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –∏–≥—Ä—ã -->
        <iframe class="modal-iframe" src="about:blank" id="tabletIframe"></iframe>
        <div class="modal-hint">
    üí° –ó–¥–µ—Å—å —Ç–æ–∂–µ –≤—Å—ë —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
    ¬´–í&nbsp;–ø—Ä–æ—Ü–µ—Å—Å–µ¬ª ‚Äî –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞—á–∞—Ç–æ, ¬´–ì–æ—Ç–æ–≤–æ¬ª ‚Äî –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–∏–≥–Ω–∞–ª –æ–± —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏.
</div>
<div class="modal-buttons">
    <button class="modal-btn primary status-btn" id="tabletTryBtn">
        –í –ø—Ä–æ—Ü–µ—Å—Å–µ
    </button>
    <button class="modal-btn success status-btn" id="tabletCompleteBtn">
        –ì–æ—Ç–æ–≤–æ
    </button>
    <button class="modal-btn close" id="tabletCloseBtn">
        –ó–∞–∫—Ä—ã—Ç—å
    </button>
</div>

    </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞: –ø–æ–∏–≥—Ä–∞—Ç—å -->
<div class="modal-overlay" id="playModal">
    <div class="modal-content">
        <div class="modal-header">üéÆ –ü–æ–∏–≥—Ä–∞—Ç—å –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</div>
        <!-- –ó–∞–º–µ–Ω–∏—Ç—å about:blank –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –∏–≥—Ä—ã/–≤–∏–¥–µ–æ -->
        <iframe class="modal-iframe" src="about:blank" id="playIframe"></iframe>
        <div class="modal-hint">
    üéâ –ù–µ–º–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞! –°—Ç–∞—Ç—É—Å –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
    ¬´–í&nbsp;–ø—Ä–æ—Ü–µ—Å—Å–µ¬ª ‚Äî –ø–æ–∫–∞ –∏–≥—Ä–∞ –æ—Ç–∫—Ä—ã—Ç–∞, ¬´–ì–æ—Ç–æ–≤–æ¬ª ‚Äî –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–∏–≥–Ω–∞–ª, —á—Ç–æ –∫–æ—Ç–∏–∫ –Ω–∞–∏–≥—Ä–∞–ª—Å—è.
</div>
<div class="modal-buttons">
    <button class="modal-btn primary status-btn" id="playProcessBtn">
        –í –ø—Ä–æ—Ü–µ—Å—Å–µ
    </button>
    <button class="modal-btn success status-btn" id="playDoneBtn">
        –ì–æ—Ç–æ–≤–æ
    </button>
    <button class="modal-btn close" id="playCloseBtn">
        –ó–∞–∫—Ä—ã—Ç—å
    </button>
</div>

    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω—Ü–æ–≤–∫–∏ -->
<div class="ending-overlay" id="endingOverlay">
    <div class="ending-content">
        <div class="ending-title">üìñ –ö–æ–Ω–µ—Ü –∏—Å—Ç–æ—Ä–∏–∏</div>
        <div class="ending-image-placeholder" id="teacherImage">
            üë©‚Äçüè´ –ó–¥–µ—Å—å –±—É–¥–µ—Ç —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞
        </div>
        <div class="ending-text" id="endingText">
            –¢–µ–∫—Å—Ç –∫–æ–Ω—Ü–æ–≤–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...
        </div>
        <button class="ending-btn" id="restartBtn">
            üîÑ –°—ã–≥—Ä–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞
        </button>
    </div>
</div>

<script>
    /* ---------- –°–û–°–¢–û–Ø–ù–ò–ï ---------- */
    let boardTried = false;
    let boardCompleted = false;
    let tabletTried = false;
    let tabletCompleted = false;

    // ¬´–ü–æ–∏–≥—Ä–∞—Ç—å¬ª ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏: –æ—Ç–∫—Ä—ã–ª/–∑–∞–≤–µ—Ä—à–∏–ª
    let playTried = false;
    let playCompleted = false;

    // —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º (–µ—Å–ª–∏ –≤ localStorage –æ—Å—Ç–∞–ª–æ—Å—å played)
    let played = false;
// –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: true ‚Äî –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, false ‚Äî –∫–∞–∫ –¥–ª—è –¥–µ—Ç–µ–π
const DEV_MODE = false;


    /* ---------- DOM-—ç–ª–µ–º–µ–Ω—Ç—ã ---------- */
    const boardBtn = document.getElementById("boardBtn");
    const tabletBtn = document.getElementById("tabletBtn");
    const playBtn = document.getElementById("playBtn");
    const exitBtn = document.getElementById("exitBtn");

    const boardStatus = document.getElementById("boardStatus");
    const tabletStatus = document.getElementById("tabletStatus");
    const playStatus = document.getElementById("playStatus");

    const classroomImg = document.getElementById("classroomImg");
    const boardPreview = document.getElementById("boardPreview");
    const tabletPreview = document.getElementById("tabletPreview");
    const phonePreview = document.getElementById("phonePreview");
	const sceneTitlePanel = document.getElementById("sceneTitlePanel");
	const sceneCaptionPanel = document.getElementById("sceneCaptionPanel");


    const boardModal = document.getElementById("boardModal");
    const tabletModal = document.getElementById("tabletModal");
    const playModal = document.getElementById("playModal");

    const boardTryBtn = document.getElementById("boardTryBtn");
    const boardCompleteBtn = document.getElementById("boardCompleteBtn");
    const boardCloseBtn = document.getElementById("boardCloseBtn");

    const tabletTryBtn = document.getElementById("tabletTryBtn");
    const tabletCompleteBtn = document.getElementById("tabletCompleteBtn");
    const tabletCloseBtn = document.getElementById("tabletCloseBtn");

    const playProcessBtn = document.getElementById("playProcessBtn");
const playDoneBtn = document.getElementById("playDoneBtn");
const playCloseBtn = document.getElementById("playCloseBtn");


    const endingOverlay = document.getElementById("endingOverlay");
    const teacherImage = document.getElementById("teacherImage");
    const endingText = document.getElementById("endingText");
    const restartBtn = document.getElementById("restartBtn");

    const progressFill = document.getElementById("progressFill");
	const boardIframe  = document.getElementById("boardIframe");
	const tabletIframe = document.getElementById("tabletIframe");
	const playIframe   = document.getElementById("playIframe");
	const santaImage = document.getElementById("santaImage");
    const santaCaption = document.getElementById("santaCaption");


	// ---- –¢–í–û–ò –°–°–´–õ–ö–ò –ù–ê –ò–ì–†–´ ----
	const BOARD_GAME_URL = "./Fruct_mobile.html";      // —Ä–∞–±–æ—Ç–∞ —É –¥–æ—Å–∫–∏
	const TABLET_GAME_URL = "./Labirint_mobile.html";   // —Ä–∞–±–æ—Ç–∞ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ
	const PLAY_GAME_URL = "./Memori_mobile.html";   // –∏–≥—Ä–∞
	// –ö–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
	const TEACHER_IMG_STRICT = "./teacher-strict.png";  // –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–ª
	const TEACHER_IMG_SOFT   = "./teacher-soft.png";    // —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞–ª, –Ω–æ –Ω–µ –≤—Å—ë
	const TEACHER_IMG_HAPPY  = "./teacher-happy.png";   // –≤—Å—ë ¬´–ì–æ—Ç–æ–≤–æ¬ª
    // –ö–∞—Ä—Ç–∏–Ω–∫–∏ –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞ –¥–ª—è –ø–∞–Ω–µ–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    const SANTA_WAIT_IMG = "./santa-wait.png";
    const SANTA_SAD_IMG  = "./santa-sad.png";
    const SANTA_HAPPY_IMG = "./santa-happy.png";

// ------------------------------


    /* ---------- localStorage ---------- */
    function saveState() {
        const state = {
            boardTried,
            boardCompleted,
            tabletTried,
            tabletCompleted,
            playTried,
            playCompleted,
        };
        localStorage.setItem("kittenGameState", JSON.stringify(state));
    }

    function loadState() {
        const saved = localStorage.getItem("kittenGameState");
        if (!saved) return;
        try {
            const state = JSON.parse(saved);
            boardTried = !!state.boardTried;
            boardCompleted = !!state.boardCompleted;
            tabletTried = !!state.tabletTried;
            tabletCompleted = !!state.tabletCompleted;

            // –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–ü–æ–∏–≥—Ä–∞—Ç—å¬ª
            playTried = !!state.playTried || !!state.played;
            playCompleted = !!state.playCompleted || !!state.played;

            // —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Å—Ç–∞—Ä—ã–π —Ñ–ª–∞–≥ played —Å—á–∏—Ç–∞–ª—Å—è ¬´–∑–∞–≤–µ—Ä—à–µ–Ω–æ¬ª
            played = playCompleted;
        } catch (e) {
            console.warn("–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:", e);
        }
    }

    /* ---------- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ---------- */

    function setStatus(badgeEl, tried, completed) {
        badgeEl.classList.remove(
            "status-not-started",
            "status-in-progress",
            "status-done"
        );

        if (completed) {
            badgeEl.textContent = "–ì–æ—Ç–æ–≤–æ";
            badgeEl.classList.add("status-done");
            return;
        }

        if (tried) {
            badgeEl.textContent = "–í –ø—Ä–æ—Ü–µ—Å—Å–µ";
            badgeEl.classList.add("status-in-progress");
        } else {
            badgeEl.textContent = "–ù–µ –Ω–∞—á–∞—Ç–æ";
            badgeEl.classList.add("status-not-started");
        }
    }

    function updateProgress() {
        // –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–æ–ª—å–∫–æ –æ—Ç –¥–≤—É—Ö —É—á–µ–±–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
        let completedCount = 0;
        if (boardCompleted) completedCount++;
        if (tabletCompleted) completedCount++;
        const percent = (completedCount / 2) * 100;
        progressFill.style.width = percent + "%";
    }

    function updateUI() {
    // –∫–Ω–æ–ø–∫–∏ —Å–ª–µ–≤–∞
    if (boardCompleted) {
        boardBtn.classList.add("completed");
        // –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –±–ª–æ–∫–∏—Ä—É–µ–º, –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∞–∫—Ç–∏–≤–Ω–æ–π
        boardBtn.disabled = !DEV_MODE;
    } else {
        boardBtn.classList.remove("completed");
        boardBtn.disabled = false;
    }

    if (tabletCompleted) {
        tabletBtn.classList.add("completed");
        tabletBtn.disabled = !DEV_MODE;
    } else {
        tabletBtn.classList.remove("completed");
        tabletBtn.disabled = false;
    }

    setStatus(boardStatus, boardTried, boardCompleted);
    setStatus(tabletStatus, tabletTried, tabletCompleted);
    setStatus(playStatus, playTried, playCompleted);

    updateProgress();
    if (typeof updateSanta === "function") updateSanta();
}
    function updateSanta() {
        if (!santaImage) return;

        let img = SANTA_WAIT_IMG;
        let text = "–î–µ–¥ –ú–æ—Ä–æ–∑ –∂–¥—ë—Ç, –∫–æ–≥–¥–∞ –∫–æ—Ç–∏–∫ –Ω–∞—á–Ω—ë—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.";

        const started = boardTried || tabletTried || played;

        if (boardCompleted && tabletCompleted) {
            // –≤—Å—ë "–ì–æ—Ç–æ–≤–æ" ‚Äî —Ä–∞–¥–æ—Å—Ç–Ω—ã–π –î–µ–¥ –ú–æ—Ä–æ–∑ —Å –ø–æ–¥–∞—Ä–∫–æ–º
            img = SANTA_HAPPY_IMG;
            text = "–£—Ä–∞! –ö–æ—Ç–∏–∫ –≤—Å—ë —Å–¥–µ–ª–∞–ª ‚Äî –î–µ–¥ –ú–æ—Ä–æ–∑ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª –ø–æ–¥–∞—Ä–æ–∫!";
        } else if (started) {
            // —á—Ç–æ-—Ç–æ –Ω–∞—á–∞–ª–∏, –Ω–æ –Ω–µ –≤—Å—ë –∑–∞–≤–µ—Ä—à–∏–ª–∏
            img = SANTA_SAD_IMG;
            text = "–î–µ–¥ –ú–æ—Ä–æ–∑ –Ω–µ–º–Ω–æ–≥–æ –≥—Ä—É—Å—Ç–∏—Ç: –∫–æ—Ç–∏–∫ –Ω–∞—á–∞–ª –∑–∞–¥–∞–Ω–∏—è, –Ω–æ –µ—â—ë –Ω–µ –≤—Å—ë –∑–∞–≤–µ—Ä—à–∏–ª.";
        }

        santaImage.style.backgroundImage = `url('${img}')`;
        santaCaption.textContent = text;
    }


    /* ---------- –ü—Ä–µ–≤—å—é –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ ---------- */

    function hideAllScenes() {
        classroomImg.classList.add("hidden");
        boardPreview.classList.add("hidden");
        tabletPreview.classList.add("hidden");
        phonePreview.classList.add("hidden");
    }

function showScene(type) {
    hideAllScenes();

    let activeScene;

    if (type === "board") {
        activeScene = boardPreview;
    } else if (type === "tablet") {
        activeScene = tabletPreview;
    } else if (type === "phone") {
        activeScene = phonePreview;
    } else {
        activeScene = classroomImg; // –Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ü–µ–Ω–∞
    }

    // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ü–µ–Ω—É (–∏–∫–æ–Ω–∫–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É)
    activeScene.classList.remove("hidden");

    // –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ —Å–∫—Ä—ã—Ç—ã—Ö –±–ª–æ–∫–æ–≤ —ç—Ç–æ–π —Å—Ü–µ–Ω—ã –≤ –Ω–∏–∂–Ω—é—é –ø–ª–∞—à–∫—É
    if (sceneTitlePanel && sceneCaptionPanel) {
        const titleEl = activeScene.querySelector(".scene-title");
        const captionEl = activeScene.querySelector(".classroom-caption");

        if (titleEl) {
            sceneTitlePanel.textContent = titleEl.textContent;
        }
        if (captionEl) {
            sceneCaptionPanel.textContent = captionEl.textContent;
        }
    }
}


		const leftMenu = document.querySelector(".left-menu");

		boardBtn.addEventListener("mouseenter", () => showScene("board"));
		tabletBtn.addEventListener("mouseenter", () => showScene("tablet"));
		playBtn.addEventListener("mouseenter", () => showScene("phone"));

		// —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫—É—Ä—Å–æ—Ä —É—à—ë–ª –° –õ–ï–í–û–ô –ü–ê–ù–ï–õ–ò —Ü–µ–ª–∏–∫–æ–º
		leftMenu.addEventListener("mouseleave", () => showScene("class"));

    /* ---------- –ú–æ–¥–∞–ª–∫–∏ ---------- */

    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É "–†–∞–±–æ—Ç–∞—Ç—å —É –¥–æ—Å–∫–∏" –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∏–≥—Ä—É
boardBtn.addEventListener("click", () => {
    if (boardBtn.disabled) return;

    if (!boardIframe.src || boardIframe.src === "about:blank") {
        boardIframe.src = BOARD_GAME_URL;
    }

    // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ —Ä–∞–±–æ—Ç–∞ –Ω–∞—á–∞—Ç–∞
    boardTried = true;
    saveState();
    updateUI();

    boardModal.classList.add("active");
    document.body.classList.add("no-scroll");
})

// –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É "–†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ"
tabletBtn.addEventListener("click", () => {
    if (tabletBtn.disabled) return;

    if (!tabletIframe.src || tabletIframe.src === "about:blank") {
        tabletIframe.src = TABLET_GAME_URL;
    }

    tabletTried = true;
    saveState();
    updateUI();

    tabletModal.classList.add("active");
    document.body.classList.add("no-scroll");
});

// –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É "–ü–æ–∏–≥—Ä–∞—Ç—å"
playBtn.addEventListener("click", () => {
    if (!playIframe.src || playIframe.src === "about:blank") {
        playIframe.src = PLAY_GAME_URL;
    }

    // –í–∞–∂–Ω–æ: –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ¬´–í –ø—Ä–æ—Ü–µ—Å—Å–µ¬ª –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
    playTried = true;
    saveState();
    updateUI();

    playModal.classList.add("active");
    document.body.classList.add("no-scroll");
});


    boardCloseBtn.addEventListener("click", () => { boardModal.classList.remove("active"); document.body.classList.remove("no-scroll"); });
    tabletCloseBtn.addEventListener("click", () => { tabletModal.classList.remove("active"); document.body.classList.remove("no-scroll"); });
    playCloseBtn.addEventListener("click", () => { playModal.classList.remove("active"); document.body.classList.remove("no-scroll"); });

    [boardModal, tabletModal, playModal].forEach((modal) => {
        modal.addEventListener("click", (e) => {
            if (e.target === modal) { modal.classList.remove("active"); document.body.classList.remove("no-scroll"); }
        });
    

    /* ---------- –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ –º–æ–¥–∞–ª–∫–∞—Ö (—Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º) ---------- */
    boardTryBtn.addEventListener("click", () => {
        boardTried = true;
        saveState();
        updateUI();
    });

    boardCompleteBtn.addEventListener("click", () => {
        boardTried = true;
        boardCompleted = true;
        saveState();
        updateUI();
    });

    tabletTryBtn.addEventListener("click", () => {
        tabletTried = true;
        saveState();
        updateUI();
    });

    tabletCompleteBtn.addEventListener("click", () => {
        tabletTried = true;
        tabletCompleted = true;
        saveState();
        updateUI();
    });

    playProcessBtn.addEventListener("click", () => {
        playTried = true;
        saveState();
        updateUI();
    });

    playDoneBtn.addEventListener("click", () => {
        playTried = true;
        playCompleted = true;
        saveState();
        updateUI();
    });
});

    
    /* ---------- –õ–æ–≥–∏–∫–∞ –∫–æ–Ω—Ü–æ–≤–æ–∫ ---------- */

    function showEnding() {
    let text = "";
    let imageUrl = "";

    if (!boardTried && !tabletTried) {
        // –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–ª–∏
        text =
            "–î–µ–¥ –ú–æ—Ä–æ–∑ –æ–≥–æ—Ä—á—ë–Ω: ¬´–¢—ã —Å–æ–≤—Å–µ–º –Ω–µ –∑–∞–Ω–∏–º–∞–ª—Å—è. –¢–æ–ª—å–∫–æ –∏–≥—Ä–∞ ‚Äî –º–∞–ª–æ! –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å —É –¥–æ—Å–∫–∏ –∏–ª–∏ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ.¬ª";
        imageUrl = TEACHER_IMG_STRICT;
    } else if ((boardTried || tabletTried) && !(boardCompleted && tabletCompleted)) {
        // —á—Ç–æ-—Ç–æ –Ω–∞—á–∞–ª–∏, –Ω–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ ¬´–í –ø—Ä–æ—Ü–µ—Å—Å–µ¬ª
        text =
            "–î–µ–¥ –ú–æ—Ä–æ–∑ —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª—Å—è: ¬´–¢—ã —É–∂–µ —Å–¥–µ–ª–∞–ª —à–∞–≥ –≤ —Å—Ç–æ—Ä–æ–Ω—É —É—á–µ–±—ã. –ù–æ —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É —Å–∏–ª—å–Ω—ã–º, –Ω–∞–¥–æ —á—É—Ç—å –±–æ–ª—å—à–µ —É—Å–µ—Ä–¥–∏—è. –Ø –≤–µ—Ä—é, —á—Ç–æ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è!¬ª";
        imageUrl = TEACHER_IMG_SOFT;
    } else if (boardCompleted && tabletCompleted) {
        // –æ–±–µ —Ä–∞–±–æ—Ç—ã ¬´–ì–æ—Ç–æ–≤–æ¬ª
        text =
            "üéâ –î–µ–¥ –ú–æ—Ä–æ–∑ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª –ø–æ–¥–∞—Ä–æ–∫: ¬´–ë—Ä–∞–≤–æ! –¢—ã –æ—Ç–ª–∏—á–Ω–æ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –∏ —É –¥–æ—Å–∫–∏, –∏ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ. –¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–ª–æ–¥–µ—Ü! –î–µ—Ä–∂–∏ –ø–æ–¥–∞—Ä–æ–∫.¬ª";
        imageUrl = TEACHER_IMG_HAPPY;
    }

    endingText.textContent = text;

    // —É–±–∏—Ä–∞–µ–º —Ç–µ–∫—Å—Ç-–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –∏ —Å—Ç–∞–≤–∏–º –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ –±–µ–ª—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
    teacherImage.textContent = "";
    if (imageUrl) {
        teacherImage.style.backgroundImage = `url('${imageUrl}')`;
    } else {
        teacherImage.style.backgroundImage = "none";
    }

    endingOverlay.classList.add("active");
}


    exitBtn.addEventListener("click", showEnding);

    restartBtn.addEventListener("click", () => {
        localStorage.removeItem("kittenGameState");
        boardTried = boardCompleted = tabletTried = tabletCompleted = played = false;
        hideAllScenes();
        classroomImg.classList.remove("hidden");
        endingOverlay.classList.remove("active");
        updateUI();
    });

    /* ---------- postMessage –æ—Ç –∏–≥—Ä –≤ iframe ---------- */
    /*
        –ü—Ä–∏–º–µ—Ä –∏–∑ –∏–≥—Ä—ã –≤–Ω—É—Ç—Ä–∏ iframe:
        window.parent.postMessage({ type: 'boardSuccess' }, '*');
    */
    window.addEventListener("message", (event) => {
        if (!event.data || typeof event.data !== "object") return;
        const { type } = event.data;

        if (type === "boardSuccess") {
            boardTried = true;
            boardCompleted = true;
        } else if (type === "tabletSuccess") {
            tabletTried = true;
            tabletCompleted = true;
        } else if (type === "played") {
            playTried = true;
            playCompleted = true;
            played = true; // —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
        } else {
            return;
        }

        saveState();
        updateUI();
    });

    /* ---------- –°—Ç–∞—Ä—Ç ---------- */
    loadState();
    updateUI();
    showScene("class");
</script>
</body>
</html>
